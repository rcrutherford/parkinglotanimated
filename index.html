<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script type="text/javascript" src="car.js"></script>
	<script type="text/javascript" src="space.js"></script>
	<script type="text/javascript" src="lane.js"></script>
	<script type="text/javascript">
		
		window.onload = function () {
			let lot = document.getElementById("lot");
			let windowWidth = parseInt(getComputedStyle(lot).width.replace('px',''));
			let lotHeight = parseInt(getComputedStyle(lot).height.replace('px',''));
			let lotWidth = lotHeight * 1.333333333;
			if (windowWidth<lotWidth){
				alert("Please make window width wider than parkinglot!")
			}
			let lotLeft = (windowWidth - lotWidth )/2;
			let bottomIgnore = lotHeight*.02117;
			let topIgnore = lotHeight*.01466;
			let leftIgnore = lotWidth*.010975;
			let spacesHeight =lotHeight -bottomIgnore - topIgnore;
			let spaceSmallestDim = spacesHeight / 9;
			let spaceLargestDim = spaceSmallestDim * 1.75;
			let onePctWidth = lotWidth/100;
			let onePctHeight = spacesHeight/100;


			

			createSpaces();
			createLanes();

			var eventProxy = document.getElementById("eventProxy");
			var carImg = document.getElementById('car1');

			var space = new Space(300, 1070);
			var car = new Car(carImg, space);

			eventProxy.addEventListener('tick',car.observeTime);

			var intervalId = setInterval(fireTick, 33.3333);

			function fireTick() {
				let event = new Event('tick');
				eventProxy.dispatchEvent(event);
			}

		};
	</script>	
	<style type="text/css">
		 body, html {
	        height: 100%;
	        margin: 0;
	    }
		.bg {
	        /* The image used */
	        background-image: url("images/parkinglot86.jpg");
	        /* Full height */
	        height: 100%; 

	        /* Center and scale the image*/
	        background-position: center;
	        background-repeat: no-repeat;
	        background-size: contain;
	        border: solid red 2px;
	        /*position: relative;*/
	    }
	    .space {
	    	border: solid green 1px;
	    	position: absolute;
	    	display: flex;
		    align-items: center;
		    justify-content: center;
  			
	    }
	    .lane {
	    	border: solid blue 1px;
	    	position: absolute;
	    	display: flex;
		    align-items: center;
		    justify-content: center;
	    }
	    .car {
			position: absolute;
		}

	</style>
</head>
<body>
	<div id="lot" class="bg">
		<img id="car1" class = "car" src="images/car-red.png" />
	</div>
</body>
</html>